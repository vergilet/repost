<p align="right">
    <a href="https://github.com/vergilet/repost"><img align="" src="https://user-images.githubusercontent.com/2478436/51829223-cb05d600-22f5-11e9-9245-bc6e82dcf028.png" width="56" height="56" /></a>
<a href="https://rubygems.org/gems/repost"><img align="right" src="https://user-images.githubusercontent.com/2478436/51829691-c55cc000-22f6-11e9-99a5-42f88a8f2a55.png" width="56" height="56" /></a>
</p>

<p align="center">
    <a href="https://rubygems.org/gems/repost">
  <img width="460" src="https://user-images.githubusercontent.com/2478436/55672583-44491880-58a5-11e9-945c-939f90470df8.png"></a>
</p>



Gem **Repost** implements Redirect using POST method

[![Build Status](https://travis-ci.org/vergilet/repost.svg?branch=master)](https://travis-ci.org/vergilet/repost)

## Installation

Add this line to your application's Gemfile:

```ruby
gem 'repost'
```

And then execute:

    $ bundle

Or install it yourself as:

    $ gem install repost



## Diagram

What problem does it solve?

<p align="center">
    <a href="https://user-images.githubusercontent.com/2478436/55143646-d0da3500-5147-11e9-91a3-1bac9d560fb2.png">
  <img src="https://user-images.githubusercontent.com/2478436/55143646-d0da3500-5147-11e9-91a3-1bac9d560fb2.png"></a>
</p>


## Usage

If you use Rails, gem automatically includes helper methods to your controllers:

```ruby
repost(*SOME_SETTINGS*)
```
and, as an alias

```ruby
redirect_post(*SOME_SETTINGS*)
```

*Under the hood it calls `render` method of current controller with `html:`.*

### Example in Rails app:

```ruby
class MyController < ApplicationController
  ...
  def index
    repost(*SOME_SETTINGS*)
  end
  ...
end
```
______________

If you use Sinatra or etc., you need to require it first somewhere in you project:

```ruby
require 'repost'
```

Then ask your senpai to generate a string with html:


```ruby
Repost::Senpai.perform(*SOME_URL*, params: *SOME_PARAMS*, options: *SOME_OPTIONS*)
```

### Example in Sinatra app:

```ruby
class MyController < Sinatra::Base
  get '/' do
    Repost::Senpai.perform(*SOME_URL*, params: *SOME_PARAMS*, options: *SOME_OPTIONS*)
  end
end
```



#### *Reminder:*

- *In Rails app use `repost` or `redirect_post` method in your controller which performs 'redirect' when it is called.*

- *In Sinatra app or if you need html output - call Senpai*


#### Full example:

*UPD: authenticity token is turned of by default. Use `:auto` or `'auto'` to turn on default authenticity token from Rails. Any other string value would be treated as custom auth token value.*

```ruby
Repost::Senpai.perform('http://examp.io/endpoint',  # URL, looks understandable 
  params: {a: 1, b: 2, c: '3', d: "4"},             # Your request body
  options: {
    method: :post,                                  # OPTIONAL - DEFAULT is :post, but you can use others if needed
    authenticity_token: 'auto',                     # OPTIONAL - :auto or 'auto' for Rails form_authenticity_token, string - custom token
    charset: 'Windows-1251',                        # OPTIONAL - DEFAULT is "UTF-8", corresponds for accept-charset
    form_id: 'CustomFormID',                        # OPTIONAL - DEFAULT is autogenerated
    autosubmit: false,                              # OPTIONAL - DEFAULT is true, if you want to get a confirmation for redirect  
    decor: {                                        # If autosubmit is turned off or Javascript is disabled on client
      section: {                                    # ... you can decorate confirmation section and button
        classes: 'red-bg red-text',                 # OPTIONAL - <DIV> section, set classNames, separate with space
        html: '<h1>Press this button, dude!</h1>'   # OPTIONAL - Any html, which will appear before submit button
      },
      submit: {
        classes: 'button-decorated round-border',   # OPTIONAL - <Input> with type submit, set classNames, separate with space
        text: 'c0n71nue ...'                        # OPTIONAL - DEFAULT is 'Continue'
      }
    }
  }
)

```



**That's all folks.**
